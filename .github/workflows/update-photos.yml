name: Update Photo Links

on:
  workflow_dispatch:  # Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
    inputs:
      photo1:
        description: 'Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¿ÐµÑ€Ð²Ð¾Ðµ Ñ„Ð¾Ñ‚Ð¾'
        required: true
        default: ''
      photo2:
        description: 'Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð²Ñ‚Ð¾Ñ€Ð¾Ðµ Ñ„Ð¾Ñ‚Ð¾'
        required: true
        default: ''
      description1:
        description: 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ„Ð¾Ñ‚Ð¾'
        required: false
        default: 'Ð¤Ð¾Ñ‚Ð¾ 1'
      description2:
        description: 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ñ„Ð¾Ñ‚Ð¾'
        required: false
        default: 'Ð¤Ð¾Ñ‚Ð¾ 2'

jobs:
  update-photos:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Create or update photos file
      run: |
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¸Ð»Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ñ„Ð¾Ñ‚Ð¾
        cat > PHOTOS.md << EOF
        # ðŸ“¸ Ð¡ÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸
        
        ## ðŸ“ Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
        - **Ð”Ð°Ñ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ:** $(date '+%Y-%m-%d %H:%M:%S')
        - **ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ‡ÐµÑ€ÐµÐ·:** GitHub Actions Workflow
        
        ## ðŸ–¼ï¸ Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸
        
        ### ${{ github.event.inputs.description1 }}
        ![${{ github.event.inputs.description1 }}](${{ github.event.inputs.photo1 }})
        
        **Ð¡ÑÑ‹Ð»ÐºÐ°:** [${{ github.event.inputs.photo1 }}](${{ github.event.inputs.photo1 }})
        
        ---
        
        ### ${{ github.event.inputs.description2 }}
        ![${{ github.event.inputs.description2 }}](${{ github.event.inputs.photo2 }})
        
        **Ð¡ÑÑ‹Ð»ÐºÐ°:** [${{ github.event.inputs.photo2 }}](${{ github.event.inputs.photo2 }})
        
        ---
        
        ## ðŸ”§ Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
        - Workflow: \`${{ github.workflow }}\`
        - Ð—Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾: \`${{ github.actor }}\`
        - Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹: \`${{ github.repository }}\`
        
        *Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» Ð±Ñ‹Ð» ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸*
        EOF
        
        echo "Ð¤Ð°Ð¹Ð» PHOTOS.md ÑÐ¾Ð·Ð´Ð°Ð½/Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½"
    
    - name: Commit changes
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add PHOTOS.md
        git commit -m "ðŸ“¸ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑÑ‹Ð»Ð¾Ðº Ð½Ð° Ñ„Ð¾Ñ‚Ð¾
          
          Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð½Ð¾Ð²Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ñ„Ð¾Ñ‚Ð¾:
          - ${{ github.event.inputs.description1 }}
          - ${{ github.event.inputs.description2 }}
          
          Ð”Ð°Ñ‚Ð°: $(date '+%Y-%m-%d %H:%M:%S')" || echo "No changes to commit"
    
    - name: Push changes
      run: |
        git push origin HEAD:${{ github.ref_name }}
